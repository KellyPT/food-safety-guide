<!DOCTYPE html>
<html ng-app="foodsafety">
<head>
  <meta charset="utf-8">
  <title>Food Safety</title>
  <!-- <link rel="stylesheet" type="text/css" href="map/main.css"> -->
  <script src="http://code.angularjs.org/snapshot/angular.min.js"></script>
  <script src="./src/app.js"></script>
</head>
<body>
  <h1>Safe Food in Seattle</h1>
  <form name="FilteringForm" ng-controller="FilterController">
    <div>
      <h3>Safe or Unsafe</h3>
      <select name="safeChoice" id="safeChoice" ng-model="condition.safeChoice">
        <option value=""></option>
        <option value="safe">Safe</option>
        <option value="unsafe">Unsafe</option>
      </select><br/>
    </div>

    <div class="businessType">
      <h3>Type filter</h3>
      <select name="businessType" id="businessType" ng-model="condition.businessType">
        <option value=""></option>
        <option value="Bakery">Bakery (no seating)</option>
        <option value="Bed">Bed &amp; Breakfast</option>
        <option value="Seating 0-12">Eatery 0-12 seats</option>
        <option value="Seating 13-50">Eatery 13-50 seats</option>
        <option value="Seating 51-150">Eatery 51-150 seats</option>
        <option value="Seating 151-250">Eatery 151-250 seats</option>
        <option value="Seating > 250">Eatery > 250 seats</option>
        <option value="Grocery">Grocery Store (no seating)</option>
        <option value="Limited">Limited Food Services</option>
        <option value="Meat">Meat/Sea Food Supermarket</option>
        <option value="Mobile">Mobile Food Unit</option>
        <option value="Non-Profit">Non-Profit Institution</option>
        <option value="School">School Lunch Program</option>
        <option value="Tasting">Tasting Room</option>
      </select><br/>
    </div>


    <div class="zipcode">
      <h3>Zip Code filter</h3>
      <select name="zipcode" id="zipcode" ng-model="condition.zipcode">
        <option value=""></option>
        <option value="98101">98101</option>
        <option value="98102">98102</option>
        <option value="98103">98103</option>
        <option value="98104">98104</option>
        <option value="98105">98105</option>
        <option value="98106">98106</option>
        <option value="98107">98107</option>
        <option value="98108">98108</option>
        <option value="98109">98109</option>
        <option value="98112">98112</option>
        <option value="98115">98115</option>
        <option value="98116">98116</option>
        <option value="98117">98117</option>
        <option value="98118">98118</option>
        <option value="98119">98119</option>
        <option value="98121">98121</option>
        <option value="98122">98122</option>
        <option value="98125">98125</option>
        <option value="98126">98126</option>
        <option value="98133">98133</option>
        <option value="98134">98134</option>
        <option value="98136">98136</option>
        <option value="98144">98144</option>
        <option value="98146">98146</option>
        <option value="98154">98154</option>
        <option value="98164">98164</option>
        <option value="98174">98174</option>
        <option value="98177">98177</option>
        <option value="98178">98178</option>
        <option value="98195">98195</option>
        <option value="98198">98198</option>
      </select><br/>
    </div>

    <!-- <div class="map container">
    <h2>D3 Map</h2>
    <div id="wa-chart"></div>
  </div> -->

  <div class="list">Final Lists of Restaurant</div>
  <div class="result">
    <tt>condition = {{condition | json}}</tt><br/>
    <tt>dbUrl = {{dbUrl}}</tt><br/>
    <tt>data count = {{data.length}}</tt><br/>
  </div>

  <div class="alert alert-info">
    <p>Sort Type: {{ sortType }}</p>
    <p>Sort Reverse: {{ sortReverse }}</p>
    <p>Search Query: {{ searchName }}</p>
  </div>

    <scrollable-table watch="data">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th sortable-header col="name">
              <a href="#" ng-click="sortType = 'name'">
                Name
                <span ng-show="sortType == 'name'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="address">
              <a href="#" ng-click="sortType = 'address'">
                Address
                <span ng-show="sortType == 'address'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="city">
              <a href="#" ng-click="sortType = 'city'">
                City
                <span ng-show="sortType == 'city'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="zipcode">
              <a href="#" ng-click="sortType = 'zip_code'">
                Zip Code
                <span ng-show="sortType == 'zip_code'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="phone">
              <a href="#" ng-click="sortType = 'phone'">
                Phone
                <span ng-show="sortType == 'phone'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="violation">
              <a href="#" ng-click="sortType = 'violation_points'">
                Violation Points
                <span ng-show="sortType == 'violation_points'" class="fa fa-caret-down"></span>
              </a>
            </th>
            <th sortable-header col="date">
              <a href="#" ng-click="sortType = 'inspection_date'">
                Inspection Date
                <span ng-show="sortType == 'inspection_date'" class="fa fa-caret-down"></span>
              </a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="d in data | orderBy:sortType:sortReverse">
            <td>{{ d.name }}</td>
            <td>{{ d.address }}</td>
            <td>{{ d.city}}</td>
            <td>{{ d.zip_code }}</td>
            <td>{{ d.phone }}</td>
            <td>{{ d.violation_points }}</td>
            <td>{{ d.inspection_date }}</td>
          </tr>
        </tbody>
      </table>
    </scrollable-table>

</form>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script src="http://d3js.org/queue.v1.min.js"></script>

<!-- <script type="text/javascript" src="map/main.js"></script> -->

</body>
</html>
